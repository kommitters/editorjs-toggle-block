!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Toggle=e():t.Toggle=e()}(self,(function(){return(()=>{var t={424:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(81),o=r.n(n),i=r(645),s=r.n(i)()(o());s.push([t.id,".toggle-block__selector > div {\n  vertical-align: middle;\n  display: inline-block;\n  padding: 1% 0 1% 0;\n  outline: none;\n  border: none;\n  width: 90%;\n}\n\n.toggle-block__icon > svg {\n  vertical-align: top;\n  width: 34px;\n  height: 34px;\n}\n\n.toggle-block__icon:hover {\n  color: #388ae5;\n  cursor: pointer;\n}\n\n.toggle-block__item {\n  padding-left: 1%;\n  margin-left: 34px;\n}\n\n.toggle-block__selector br {\n  display: none;\n}\n\n.toggle-block__input:empty:before {\n  content: attr(placeholder);\n  position: absolute;\n  color: gray;\n  background-color: transparent;\n}\n",""]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);n&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},379:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},s=[],a=0;a<t.length;a++){var l=t[a],c=n.base?l[0]+n.base:l[0],d=i[c]||0,p="".concat(c," ").concat(d);i[c]=d+1;var h=r(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var g=o(u,n);n.byIndex=a,e.splice(a,0,{identifier:p,updater:g,references:1})}s.push(p)}return s}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var i=n(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=r(i[s]);e[a].references--}for(var l=n(t,o),c=0;c<i.length;c++){var d=r(i[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=l}}},569:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},370:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 25 15"><path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"></path></svg>'},573:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 25 15"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path></svg>'}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{"use strict";r.d(n,{default:()=>k});var t=r(379),e=r.n(t),o=r(795),i=r.n(o),s=r(569),a=r.n(s),l=r(565),c=r.n(l),d=r(216),p=r.n(d),h=r(589),u=r.n(h),g=r(424),f={};f.styleTagTransform=u(),f.setAttributes=c(),f.insert=a().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=p(),e()(g.Z,f),g.Z&&g.Z.locals&&g.Z.locals;var m=r(370),v=r.n(m),b=r(573),y=r.n(b);class k{static get toolbox(){return{title:"Toggle",icon:v()}}static get enableLineBreaks(){return!0}constructor({data:t,api:e}){this.data={text:t.text||"",status:t.status||"closed",items:t.items||[]},this.api=e,this.wrapper=void 0}createParagraphFromToggleRoot(t){if("Enter"===t.code){const t=this.api.blocks.getCurrentBlockIndex();if("closed"===this.data.status){const e=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`);this.wrapper.firstChild.innerHTML=this._resolveToggleAction(),this._hideAndShowBlocks(t-1,e.length)}const e=this.wrapper.id,r=t+1,n=crypto.randomUUID();this.api.blocks.insert();const o=this.api.blocks.getBlockByIndex(r);o.holder.firstChild.firstChild.classList.add("toggle-block__item"),o.holder.setAttribute("foreignKey",e),o.holder.setAttribute("id",n),document.getElementById(n).firstChild.firstChild.focus()}}createParagraphFromIt(t){if("Enter"===t.code){const t=this.api.blocks.getCurrentBlockIndex(),e=this.api.blocks.getBlockByIndex(t),r=crypto.randomUUID();e.holder.firstChild.firstChild.classList.add("toggle-block__item"),e.holder.setAttribute("foreignKey",this.wrapper.id),e.holder.setAttribute("id",r),document.getElementById(r).firstChild.firstChild.focus()}}_createToggle(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("toggle-block__selector"),this.wrapper.id=crypto.randomUUID();const t=document.createElement("span");t.classList.add("toggle-block__icon"),t.innerHTML="closed"===this.data.status?v():y();const e=document.createElement("div");e.classList.add("toggle-block__input"),e.contentEditable=!0,e.addEventListener("keyup",this.createParagraphFromToggleRoot.bind(this)),e.innerHTML=this.data.text||"",e.addEventListener("keyup",this.setPlaceHolder.bind(this)),e.setAttribute("placeholder","Toggle"),e.addEventListener("focus",this.calculateChildren.bind(this)),e.addEventListener("focusout",this.calculateChildren.bind(this)),this.wrapper.appendChild(t),this.wrapper.appendChild(e)}setPlaceHolder(t){0===this.wrapper.textContent.length&&("Backspace"!==t.code&&"Enter"!==t.code||(this.wrapper.lastChild.textContent=""))}calculateChildren(){const t=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`);this.wrapper.firstChild.style.color=0===t.length?"gray":"black"}render(){return this._createToggle(),setTimeout(this.renderItems.bind(this)),this.wrapper}renderItems(){const t=this.api.blocks.getCurrentBlockIndex(),e=this.wrapper.firstChild,r=this.wrapper.id,n=this.api.blocks.getBlocksCount();let o=n>1?t+1:t;e.addEventListener("click",(()=>{const t=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`);e.innerHTML=this._resolveToggleAction(),this._hideAndShowBlocksClicking(t.length)})),this.data.items.forEach((t=>{const{type:e,data:n}=t;this.api.blocks.insert(e,n,{},o+=1,!0);const i=this.api.blocks.getBlockByIndex(o);i.holder.addEventListener("keydown",this.createParagraphFromIt.bind(this)),i.holder.firstChild.firstChild.classList.add("toggle-block__item"),i.holder.setAttribute("foreignKey",r),i.holder.setAttribute("id",crypto.randomUUID())})),n>1?this._hideAndShowBlocks(t,this.data.items.length):this._hideAndShowBlocks(t-1,this.data.items.length)}_resolveToggleAction(){let t=v();return"closed"===this.data.status?(t=y(),this.data.status="open"):this.data.status="closed",t}_hideAndShowBlocks(t,e){const r=t+1;this._iterateOnItems(e,r)}_hideAndShowBlocksClicking(t){const e=this.api.blocks.getCurrentBlockIndex();this._iterateOnItems(t,e)}_iterateOnItems(t,e){let r=e;if("closed"===this.data.status)for(let e=0;e<t;e+=1)this.api.blocks.getBlockByIndex(r+=1).holder.setAttribute("hidden",!0);else for(let e=0;e<t;e+=1)this.api.blocks.getBlockByIndex(r+=1).holder.removeAttribute("hidden")}save(t){const e=t.textContent,r=document.querySelectorAll(`div[foreignKey="${this.wrapper.id}"]`),n=[];return r.forEach((t=>{n.push({type:"paragraph",data:{text:t.textContent}})})),Object.assign(this.data,{text:e,items:[...n]})}validate(t){for(let e=0;e<t.items.length;e+=1)if(void 0===t.items[e].type||void 0===t.items[e].data)return!1;return!0}}})(),n.default})()}));